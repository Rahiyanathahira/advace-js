<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>closure</title>
  </head>
  <body>
    <script>
      //Lexical scope defines how variable names are resolved in nested function.
      //nested (child) function have access to the scope of their parent function.

      //A closure is a function having access to the parent scope,even after the parent has closed.
      //global scope
      let x = 1;
      const parentFunction = () => {
        //local scopeq
        let myValue = 2;
        console.log(x);
        console.log(myValue);

        const childFunction = () => {
          console.log((x += 5));
          console.log((myValue += 1));
        };
        return childFunction;
      };
      const result = parentFunction();
      console.log(result);
      result();
      result(); //increment ouput value
      console.log(x);
      //  console.log(myValue);//error

      //IIFE(imediatly invoked function expression)
      const privateCounter = (() => {
        let count = 0;
        console.log(`initial value:${count}`);
        return () => {
          count += 1;
          console.log(count);
        };
      })();

      privateCounter();

      privateCounter();

      const credits = ((num) => {
        let credits = num;
        console.log(`initial credits value:${credits}`);
        return () => {
          credits -= 1;
          if (credits > 0)
            console.log(`playing game,${credits} credits remaining`);
          if (credits <= 0) console.log("not enough credits");
        };
      })(3);
      credits();
      credits();
      credits();
      credits();
    </script>
  </body>
</html>
