<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Memoization</title>
  </head>
  <body>
    <script>
      //   const initAPP = async () => {
      //     const multiplyBy10 = memoizedMultiplyBy10();
      //     console.log(multiplyBy10(10));
      //     console.log(multiplyBy10(10));
      //     console.log(multiplyBy10(10));
      //     console.log(multiplyBy10(5));
      //     console.log(multiplyBy10(5));
      //   };

      const initAPP = async () => {
        const memoizedMultiplyBy10 = memoize(multiplyBy10);
        console.log(memoizedMultiplyBy10(10));
        console.log(memoizedMultiplyBy10(10));
        console.log(memoizedMultiplyBy10(10));
        console.log(memoizedMultiplyBy10(10));
        console.log(memoizedMultiplyBy10(10));
      };

      const initAPP1 = async () => {
        const memorizeADD = memoize(add);
        console.log(memorizeADD(10, 20, 30));
        console.log(memorizeADD(10, 20, 30));
        console.log(memorizeADD(10, 20, 30));
        console.log(memorizeADD(10, 20, 30));
        console.log(memorizeADD(10, 20, 30));
      };

      const initAPP2 = async () => {
        const memorizeADDMany = memoize(addMany);
        console.log(memorizeADDMany(10, 20, 30));
        console.log(memorizeADDMany(10, 20, 30));
        console.log(memorizeADDMany(10, 20, 30));
        console.log(memorizeADDMany(10, 20, 30));
        console.log(memorizeADDMany(10, 20, 30));
      };
      const initAPP3 = async () => {
        const memorizeFib = memoize(fib);
        console.log(memorizeFib(10));
        console.log(memorizeFib(10));
        console.log(memorizeFib(50));
        console.log(memorizeFib(50));
        console.log(memorizeFib(80));
      };

      document.addEventListener("DOMContentLoaded", initAPP);

      //   const multiplyBy10 = (num) => {
      //     return num * 10;
      //   };

      //   const add = (num1, num2, num3) => {
      //     return num1 + num2 + num3;
      //   };
      //   const addMany = (...args) => {
      //     return [...args].reduce((acc, num) => acc + num);
      //   };

      //fibonacci //recursion
      const fib = (pos) => {
        if (pos < 2) return pos;
        return fib(pos - 1) + fib(pos - 2);
      };

      const memoize = (fn) => {
        const cache = {};
        return (...args) => {
          //clousure
          if (args.toString() in cache) {
            console.log(cache);
            return cache[args.toString()];
          }
          const result = fn(...args);
          cache[args.toString()] = result;
          return result;
        };
      };

      const memoizedMultiplyBy10 = () => {
        const cache = {};
        return (num) => {
          if (num in cache) {
            console.log(cache);
            return cache[num];
          }
          const result = num * 10;
          cache[num] = result;
          return result;
        };
      };
    </script>
  </body>
</html>
